// GET PAGE NUMBERS OF FIHRIST ITEMS
$("[name^='fihrist-']").each(function() {
	console.log($(this).parent().prevAll("a.pageNumber").first().text() 
						+ " - " + $(this).text().toUpperCase().trim()  )
})



for( x in document.getElementsByClassName('Alt-Başlık')) {
	var inText = document.getElementsByClassName('Alt-Başlık')[x].innerHTML;
	document.getElementsByClassName('Alt-Başlık')[x].innerHTML = "<a class='fihrist' name='fihrist-" + x + "'>" + inText + "</a>";
}


<hr class="sayfaAralik">


for( x in document.getElementsByClassName('sayfaAralik')) {
	//var inText = document.getElementsByClassName('sayfaAralik')[x].setAttribute("name", "page-" + x);
	//var pageNumHeader = document.createTextNode("#" + x);
	var y = parseInt(x) + 1;
	document.getElementsByClassName('sayfaAralik')[x].insertAdjacentHTML("afterend", "<a class='pageNumber' name='page-" + y + "'>#" + y + "</a>");
}


for( x in document.getElementsByClassName('Alt-Başlık')) {
	console.log(document.getElementsByClassName('Alt-Başlık')[x].innerText);
}

var pageNums = document.getElementsByClassName('pageNumber');
for(var i = 0; i < pageNums.length; i++) {
	console.log(pageNums[i].innerText);
}

//calculate page sizes
var pageTopElements = document.getElementsByClassName("sayfaAralik");
var tmpOffset = pageTopElements[0].offsetTop;
var pageSizes = [];
var pageTops = [pageTopElements[0].offsetTop];
for( var i = 1; i < pageTopElements.length; i++) {
	pageSizes.push(pageTopElements[i].offsetTop - tmpOffset);
	pageTops.push(pageTopElements[i].offsetTop);
	tmpOffset = pageTopElements[i].offsetTop;
}
{pageSizes, pageTops};


//calc page tops
var pageTopElements = document.getElementsByClassName("sayfaAralik");
var pageTops = [pageTopElements[0].offsetTop];
for( var i = 0; i < pageTopElements.length; i++) {
		pageTops.push(pageTopElements[i].offsetTop);
}
pageTops;


// highlight separate paragraphs
var offsets = [];
for( x in document.getElementsByClassName('Paragraf-1')) {
	//var inText = document.getElementsByClassName('sayfaAralik')[x].setAttribute("name", "page-" + x);
	//var pageNumHeader = document.createTextNode("#" + x);
	
	var elm = document.getElementsByClassName('Paragraf-1')[x];
	elm.innerHTML = "<h3>#" + x + "</h3>" + elm.innerHTML;
	elm.setAttribute("name", "prg-" + x);
	offsets.push(document.body.scrollTop + elm.getBoundingClientRect().top);
}


// JQUERY highlight separate paragraphs
var offsets = [];
$(".Paragraf-1").each( function(index) {
	//var inText = document.getElementsByClassName('sayfaAralik')[x].setAttribute("name", "page-" + x);
	//var pageNumHeader = document.createTextNode("#" + x);
	
	$(this).prepend("<h3>#" + index + "</h3>");
	$(this).attr("name", "prg-" + index);
	// $('html, body').animate({ scrollTop: $(".Paragraf-1").eq(index).offset().top}, 1000);
	//offsets.push(document.body.scrollTop + elm.getBoundingClientRect().top);
} );


// get first Paragraf-1 elt in current scroll
function getElementByTopOffset(selector, offsetTop){
    return $(selector).filter(function( index, elem) {
       return $(elem).offset().top >= offsetTop;
    }).first();
}

getElementByTopOffset(".Paragraf-1", $(window).scrollTop()).attr("name");

//DETECT SCROLL STOPPING
$(window).scroll(function() {
    clearTimeout($.data(this, 'scrollTimer'));
    $.data(this, 'scrollTimer', setTimeout(function() {
        // do something
        alert("Haven't scrolled in 250ms!");
    }, 250));
});

//
window.outerHeight // page height
document.body.scrollHeight // total height
document.body.scrollTop // current scroll offset



// FIND A SPECIFIC WORD AND ENCAPSULATE IT WITHIN A SPAN TAG AND ASSIGN IT AN ID
var word = "god";

function flatten(word) {
	return word.trim().replace("-", ' ').toLowerCase();
}
var search = $( ".Paragraf-1, .Paragraf-2" ).filter( function ()
{
    return flatten($( this ).text()).indexOf( flatten(word) ) >= 0;
}).each(function() {
    var html = $(this).html();
    $(this).html(html.replace(word, "<span class='lugatSpan'>" + word + "</span>")); 
});



// SET SELECTION RANGE
function setSelectionRange(input, start, end) { 
	if (input.setSelectionRange) {
		input.focus();
		input.setSelectionRange(start, end);
	} else if (input.createTextRange) {
		var range = input.createTextRange();
		range.collapse(true);
		range.moveEnd('character', end);
		range.moveStart('character', start);
		range.select();
		return range;
	}
}


//modify selection range
function getSelectionRanges() {
	var selectedWord = window.getSelection().toString();
	window.getSelection().modify("extend", "backward", "sentence");
	var prevPart = window.getSelection().toString();
	window.getSelection().modify("extend", "forward", "sentence");
	var nextPart = window.getSelection().toString();
	return [selectedWord, nextPart, prevPart]
}

function getSelectionRanges() {
                    var selectedWord = window.getSelection().toString();
                    window.getSelection().modify("extend", "backward", "sentence");
                    var prevPart = window.getSelection().toString();
                    window.getSelection().modify("extend", "forward", "sentence");
                    var nextPart = window.getSelection().toString();
                    return [selectedWord, '|', nextPart, '|', prevPart]
                }

$('html, body').animate({ scrollTop: $("p[name='prg-12']" ).offset().top - 15}, 500, function() { console.log("SIDE_TR"); });

"$('html, body').animate({ scrollTop: $(\"p[name='" +
            activeParagraphId + "']\" ).offset().top - 15}, 500);\n" +
            "$(\"p\").removeClass(\"highlighted\");\n" +
            "var currentPrg = $(\"p[name='" + activeParagraphId + "']\"); \n" +
            "currentPrg.addClass(\"highlighted\");" +
            "currentPrg.nextUntil(currentPrg.nextAll(\".Paragraf-1\").first(), \".Paragraf-2\").addClass(\"highlighted\");\n"
